<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{{ model.car.plate }} - BBLJ車車保養手冊</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" sizes="120x120" href='{{ url_for("static", filename="assets/apple-touch-icon.png") }}'/>
        <link rel="icon" type="image/png" sizes="32x32" href='{{ url_for("static", filename="assets/favicon-32x32.png") }}'/>
        <link rel="icon" type="image/png" sizes="16x16" href='{{ url_for("static", filename="assets/favicon-16x16.png") }}'/>
        <link rel="manifest" href='{{ url_for("static", filename="assets/site.webmanifest") }}'>
        <link rel="mask-icon" href='{{ url_for("static", filename="assets/safari-pinned-tab.svg") }}' color="#5bbad5" />
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <link href='{{ url_for("static", filename="lib/fontawesome-6.3.0/css/all.min.css") }}' rel="stylesheet">
        <link href='{{ url_for("static", filename="css/layout.css") }}' rel="stylesheet">
    </head>
    <body>
        <div class="background-image"></div>
        <div class="content-wrapper">
            <div class="title-bar">
                <div class="btn-go-back" onclick="history.back();"><i class="fa-sharp fa-solid fa-arrow-left"></i></div>
                <h1 class="page-title">修改保養紀錄</h1>
            </div>
            <div class="title-bar-fixed">
                <div class="btn-go-back" onclick="history.back();"><i class="fa-sharp fa-solid fa-arrow-left"></i></div>
                <h1 class="page-title">修改保養紀錄</h1>
            </div>
            <div class="instruction">
                {{ model.car.plate }}:
            </div>
            <form class="form-view" method="post" action="/save_maintenance">
                <input id="carId" type="hidden" name="car_id" value="{{ model.car._id }}"/>
                <input id="maintId" type="hidden" name="_id" value="{{ model.maint._id }}"/>
                <label>日期：<input class="form-input" type="date" name="maint_date" value="{{model.maint_date_to_str(model.maint.maint_date)}}" required/></label>
                <br/>
                <label>項目：<input id="itemName" class="form-input" type="text" name="item_name" value="{{model.maint.item_name}}" required/></label>
                <br/>
                <label>里程：<input class="form-input" type="number" name="mileage" value="{{model.maint.mileage}}" required/></label>
                <br/>
                <label>價錢：<input class="form-input" type="number" step="0.01" name="price" value="{{model.maint.price}}" required/></label>
                <br/>
                <button class="form-button">保存</button>
                <button class="form-button" onclick="{event.preventDefault(); delete_maint();}">刪除</button>
            </form>
            <div class="floating-button">
                <a href="/">
                    <h1><i class="fa-solid fa-house"></i></h1>
                </a>
            </div>
        </div>
        <script src='{{ url_for("static", filename="js/script.js") }}'></script>
        <script>
            function main() {
                
            }
            addEventListener("DOMContentLoaded", main);
            function delete_maint() {
                let itemName = document.getElementById("itemName")?.value;
                let carId = document.getElementById("carId")?.value;
                let maintId = document.getElementById("maintId")?.value;
                if(confirm(`是否確定要刪除「${itemName}」?`)){
                    if(carId && maintId){
                        window.location = `/delete_maintenance/${carId}/${maintId}`;
                    }
                }
            }
        </script>
    </body>
</html>